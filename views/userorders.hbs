<main class="container my-4">
  <h1 class="text-center">Your Orders</h1>

  {{#if orders.length}}
  <div class="table-responsive">
    <table class="table table-bordered table-striped" id="userOrders">
      <thead>
        <tr>
          <th>#</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
          <th>Order Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each orders}}
        <tr>
          <td>{{@index}}</td>
          <td>
            {{#each products}}
              {{this.product.productname}}
            {{/each}}
          </td>
          <td>
            {{#each products}}
              {{this.quantity}}
            {{/each}}
          </td>
          <td>
            {{#each products}}
              ${{this.price}}
            {{/each}}
          </td>
          <td>${{this.totalAmount}}</td>
          <td>{{this.status}}</td>
          <td>
            {{#each products}}
              <a href="/products/view/{{this.product._id}}" class="btn btn-info btn-sm">View Product</a>
            {{/each}}
            <a href="/products/getbill/{{_id}}" class="btn btn-success btn-sm">Get Bill</a>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  {{else}}
  <p class="text-center">No orders found.</p>
  {{/if}}

  <div class="text-center mt-4">
    <a href="/" class="btn btn-primary">Back to Home</a>
  </div>
</main>

<script>
    $('#userOrders').DataTable();
</script>